<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boolzap</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous">
    <link rel="stylesheet" href="./assets/style.css">
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css"
      integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA=="crossorigin="anonymous"
      referrerpolicy="no-referrer" />
  </head>
  <body class="">

    <div id="app">

      <!-- Banner verde posto dietro al container per l'user -->
      <div class="container-fluid bg-green"></div>

      <!-- Container for user -->
      <div class="contain_for_user d-flex px-5">

        <!-- Aside bar dove c'è la navbar per l'utente-->
        <div class="asidebar">

          <!-- Header dove ci sono i dati dell'utente -->
          <header class="d-flex align-items-center px-2">
            <div class="user w-100 justify-content-between d-flex
              align-items-center">
              <div class="avatar d-flex align-items-center">
                <img class="rounded-circle" src="./assets/img/avatar_4.jpg"
                  alt="" width="100px">
                <div class="fs-5">Nome Utente</div>
              </div>
              <div class="icons fs-4">
                <i class="fas fa-circle-notch"></i>
                <i class="fas fa-comment-alt"></i>
                <i class="fas fa-ellipsis-v"></i>
              </div>
            </div>
          </header>

          <!-- sezione dedicata alle Notifiche -->
          <div class="alerts p-3 d-flex align-items-center">
            <div class="bell_notification">
              <i class="fas fa-bell-slash"></i>
            </div>
            <div class="text-dark ps-2">
              <span class="fs-5">Ricevi notifiche di nuovi messaggi</span>
              <a href="" class="text-secondary">Attiva le notifiche desktop</a>
            </div>
          </div>

          <!-- Sezione per cercare i contatti -->
          <div class="searchbar">
            <div class="input-group py-2">
              <span class="input-group-text" id="inputGroup-sizing-default">
                <i class="fas fa-search text-secondary"></i>
              </span>
              <input type="text" class="form-control" aria-label="Sizing example
                input" aria-describedby="inputGroup-sizing-default" placeholder="Cerca o inizia una nuova chat"  v-model="searchBar" @keyup="searchName">
            </div>
          </div>

          <!-- Elenco della rubrica telefonica con VueJS -->
          <div class="contacts" v-for="(contact,index) in contacts">
            <div @click="contactSelect(index)" class="contact_card p-3 d-flex" v-if="contact.visible">
              <img class="rounded-circle" :src="contact.avatar" alt="" width="80px" height="80px">
              <div class="contact_name ps-4 pt-2 fs-3 w-100">

                <!-- Blocco con i dati del contatto : Nome, Ultimo accesso e ultimo messaggio -->
                <div class="nameLastAccess d-flex justify-content-between align-items-center">
                  <div>{{contact.name}}
                  </div>
                  <div class="lastMessageDate text-secondary">{{contact.messages[contact.messages.length -1].date}}</div>
                </div>
                <div class="last_text fs-5 text-secondary">{{contact.messages[contact.messages.length -1].text}}</div>
              </div>
            </div>
          </div>

        </div>

        <!-- Container per la visualizzazione dei messaggi dei vari contatti -->
        <div class="contain position-relative">
          <!-- Visualizzazione dei dati del contatto selezionato -->
          <header class="d-flex align-items-center px-2">
            <div class="user w-100 justify-content-between d-flex
              align-items-center">
              <div class="avatar d-flex align-items-center">
                <!-- immagine del profilo del contatto -->
                <img class="rounded-circle" :src="contacts[counter].avatar"
                  alt="" width="100px">
                <div class="pt-3">
                  <!-- nome del contatto -->
                  <p class="fs-4 ps-3">{{contacts[counter].name}}</p>
                  <!-- ultimo accesso del contatto -->
                  <p class="ps-3 gray_text">Ultimo accesso</p>
                </div>
              </div>
              <!-- icone del menu sul contatto -->
              <div class="icons fs-1">
                <i class="fas fa-search"></i>
                <i class="fas fa-paperclip"></i>
                <i class="fas fa-ellipsis-v"></i>
              </div>
            </div>
          </header>

          <!-- Visualizzazione dei messaggi dei vari contatti -->
          <div class="messages_contain">

            <!-- Messaggi del contatto -->
            <div class="messages_from">
              <div class="" v-for="(message, n) in contacts[counter].messages">
                <div class="container_message clearfix">
                  <div :class="message.status" class="d-flex flex-column position-relative">
                    <i @click="dropdown(n)" class="dropdown fas fa-angle-down"></i>
                    <div class="dropdownItem" :class="dropdownBoolean != true ? 'dropdownItem' : 'dropdownVisible'">
                      <div>Message Info</div>
                      <div>Delete Message</div>
                    </div>
                    <div class="script_of_message fs-5 pe-3">{{message.text}}</div>
                    <span class="date text-end text-secondary">{{message.date}}</span>
                  </div>
                </div>
              </div>
              
            </div>

            <!-- piè di pagina per la scrittura del messaggio da inviare -->
            <div class="scripting_text d-flex align-items-center justify-content-around py-3 w-100">
              <i class="far fa-smile fs-1"></i>
              <input type="text" v-model="text" name="text_message" id="text_message" placeholder="Scrivi un messaggio" class="py-3 w-75" @keyup.enter="pushMessage(text)">
              <i class="fas fa-microphone fs-1"></i>
            </div>
          </div>
        </div>
      </div>

    </div>


    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://unpkg.com/dayjs@1.8.21/dayjs.min.js"></script>
    <script src="./assets/main.js"></script>
  </body>
</html>